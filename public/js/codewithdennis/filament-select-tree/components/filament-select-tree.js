var Qt=Object.defineProperty,wt=e=>{throw TypeError(e)},es=(e,t,s)=>t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,a=(e,t,s)=>es(e,typeof t!="symbol"?t+"":t,s),we=(e,t,s)=>t.has(e)||wt("Cannot "+s),l=(e,t,s)=>(we(e,t,"read from private field"),s?s.call(e):t.get(e)),k=(e,t,s)=>t.has(e)?wt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),E=(e,t,s,i)=>(we(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),o=(e,t,s)=>(we(e,t,"access private method"),s),Te={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},A=(e,t)=>{if(t.innerHTML="",typeof e=="string")t.innerHTML=e;else{let s=e.cloneNode(!0);t.appendChild(s)}},ye=e=>{let t=e?{...e}:{};return Object.keys(Te).forEach(s=>{t[s]||(t[s]=Te[s])}),t},ts=e=>e.reduce((t,{name:s},i)=>(t+=s,i<e.length-1&&(t+=", "),t),""),B,x,$,y,u,Lt,z,xe,Me,Y,G,St,Ne,Tt,_e,He,Ae,Oe,Ie,yt,Be,Ve,xt,Pe,Ge,We,De,ue,pe=class{constructor({value:t,showTags:s,tagsCountText:i,clearable:n,isAlwaysOpened:c,searchable:r,placeholder:v,disabled:g,isSingleSelect:C,id:w,ariaLabel:b,iconElements:f,inputCallback:L,searchCallback:M,openCallback:N,closeCallback:O,keydownCallback:V,focusCallback:I,blurCallback:F,nameChangeCallback:j}){k(this,u),a(this,"value"),a(this,"showTags"),a(this,"tagsCountText"),a(this,"clearable"),a(this,"isAlwaysOpened"),a(this,"searchable"),a(this,"placeholder"),a(this,"disabled"),a(this,"isSingleSelect"),a(this,"id"),a(this,"ariaLabel"),a(this,"iconElements"),a(this,"isOpened"),a(this,"searchText"),a(this,"srcElement"),k(this,B),k(this,x),k(this,$),k(this,y),a(this,"inputCallback"),a(this,"searchCallback"),a(this,"openCallback"),a(this,"closeCallback"),a(this,"keydownCallback"),a(this,"focusCallback"),a(this,"blurCallback"),a(this,"nameChangeCallback"),this.value=t,this.showTags=s,this.tagsCountText=i,this.searchable=r,this.placeholder=v,this.clearable=n,this.isAlwaysOpened=c,this.disabled=g,this.isSingleSelect=C,this.id=w,this.ariaLabel=b,this.iconElements=f,this.isOpened=!1,this.searchText="",E(this,B,o(this,u,Tt).call(this)),E(this,x,o(this,u,yt).call(this)),E(this,$,o(this,u,xt).call(this)),E(this,y,null),this.inputCallback=L,this.searchCallback=M,this.openCallback=N,this.closeCallback=O,this.keydownCallback=V,this.focusCallback=I,this.blurCallback=F,this.nameChangeCallback=j,this.srcElement=o(this,u,St).call(this,{htmlTagsSection:l(this,B),htmlEditControl:l(this,x),htmlOperators:l(this,$)}),o(this,u,Lt).call(this)}focus(){setTimeout(()=>l(this,x).focus(),0)}blur(){this.isOpened&&o(this,u,G).call(this),this.clearSearch(),l(this,x).blur()}updateValue(t){this.value=t,o(this,u,z).call(this),o(this,u,Y).call(this)}removeItem(t){this.value=this.value.filter(s=>s.id!==t),o(this,u,ue).call(this),o(this,u,z).call(this),o(this,u,Y).call(this)}clear(){this.value=[],o(this,u,ue).call(this),o(this,u,z).call(this),this.clearSearch()}openClose(){o(this,u,G).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),o(this,u,Y).call(this)}};B=new WeakMap,x=new WeakMap,$=new WeakMap,y=new WeakMap,u=new WeakSet,Lt=function(){o(this,u,z).call(this),o(this,u,Y).call(this),o(this,u,xe).call(this)},z=function(){if(l(this,B).innerHTML="",this.showTags){l(this,B).append(...o(this,u,_e).call(this));let e=ts(this.value);this.nameChangeCallback(e)}else{let e=o(this,u,Ie).call(this);l(this,B).appendChild(e),this.nameChangeCallback(e.innerText)}l(this,B).appendChild(l(this,x))},xe=function(){let e=[];l(this,$).innerHTML="",this.clearable&&e.push(o(this,u,Pe).call(this)),this.isAlwaysOpened||e.push(o(this,u,We).call(this,this.isOpened)),e.length&&l(this,$).append(...e)},Me=function(){if(!this.isAlwaysOpened&&l(this,y)){let e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;A(e,l(this,y))}},Y=function(){var e;(e=this.value)!=null&&e.length?(l(this,x).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(l(this,x).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),l(this,x).value=this.searchText},G=function(){this.isOpened=!this.isOpened,o(this,u,Me).call(this),this.isOpened?this.openCallback():this.closeCallback()},St=function({htmlTagsSection:e,htmlEditControl:t,htmlOperators:s}){let i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",n=>o(this,u,Ne).call(this,n)),i.addEventListener("focus",()=>this.focusCallback(),!0),i.addEventListener("blur",()=>this.blurCallback(),!0),e.appendChild(t),i.append(e,s),i},Ne=function(e){e.stopPropagation(),this.isOpened||o(this,u,G).call(this),this.focus()},Tt=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},_e=function(){return this.value.map(e=>{let t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);let s=o(this,u,Ae).call(this,e.name),i=o(this,u,Oe).call(this);return t.addEventListener("mousedown",n=>o(this,u,He).call(this,n,e.id)),t.append(s,i),t})},He=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Ae=function(e){let t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},Oe=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),A(this.iconElements.cross,e),e},Ie=function(){let e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;let t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},yt=function(){let e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>o(this,u,Be).call(this,t)),e.addEventListener("input",t=>o(this,u,Ve).call(this,t,e)),e},Be=function(e){e.stopPropagation();let t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&o(this,u,G).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},Ve=function(e,t){e.stopPropagation();let s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){let n=e.target.value;this.searchCallback(n),this.isOpened||o(this,u,G).call(this)}else t.value="";this.searchText=t.value},xt=function(){let e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Pe=function(){let e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),A(this.iconElements.clear,e),e.addEventListener("mousedown",t=>o(this,u,Ge).call(this,t)),e},Ge=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},We=function(e){E(this,y,document.createElement("span")),l(this,y).classList.add("treeselect-input__arrow");let t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return A(t,l(this,y)),l(this,y).addEventListener("mousedown",s=>o(this,u,De).call(this,s)),l(this,y)},De=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),o(this,u,G).call(this)},ue=function(){this.inputCallback(this.value)};var Mt=({newValue:e,optionsTreeMap:t,isSingleSelect:s,isIndependentNodes:i})=>{ns(t);let n=e.map(r=>t.get(r)??null).filter(r=>r!==null&&!r.disabled),[c]=n;if(s&&n.length&&c){c.checked=!0;return}n.forEach(r=>{r.checked=!0;let v=Le({option:r,optionsTreeMap:t,isIndependentNodes:i});r.checked=v})},Le=({option:{id:e,checked:t},optionsTreeMap:s,isIndependentNodes:i})=>{let n=s.get(e)??null;if(n===null)return!1;if(i)return n.checked=!n.disabled&&t,n.checked;let c=Nt({checked:t,currentOption:n,optionsTreeMap:s});return _t({childOption:n,optionsTreeMap:s}),c},Nt=({checked:e,currentOption:t,optionsTreeMap:s})=>{if(!t.isGroup)return t.checked=!t.disabled&&e,t.isPartialChecked=!1,t.checked;let i=X({id:t.id,optionsTreeMap:s});return!e||t.disabled||t.isPartialChecked?(t.checked=!1,t.isPartialChecked=!1,me({option:t,children:i,optionsTreeMap:s}),t.checked):Ht({children:i,optionsTreeMap:s})?At(i)?(t.checked=!1,t.isPartialChecked=!1,t.disabled=!0,t.checked):(t.checked=!1,t.isPartialChecked=!0,i.forEach(n=>{Nt({checked:e,currentOption:n,optionsTreeMap:s})}),t.checked):(t.checked=!0,t.isPartialChecked=!1,me({option:t,children:i,optionsTreeMap:s}),t.checked)},_t=({childOption:e,optionsTreeMap:t})=>{let s=t.get(e.childOf)??null;s!==null&&(ss({parentOption:s,optionsTreeMap:t}),_t({childOption:s,optionsTreeMap:t}))},ss=({parentOption:e,optionsTreeMap:t})=>{let s=X({id:e.id,optionsTreeMap:t});if(At(s)){e.checked=!1,e.isPartialChecked=!1,e.disabled=!0;return}if(is(s)){e.checked=!0,e.isPartialChecked=!1;return}if(ls(s)){e.checked=!1,e.isPartialChecked=!0;return}e.checked=!1,e.isPartialChecked=!1},me=({option:{checked:e,disabled:t},children:s,optionsTreeMap:i})=>{s.forEach(n=>{n.disabled=t||n.disabled,n.checked=e&&!n.disabled,n.isPartialChecked=!1;let c=X({id:n.id,optionsTreeMap:i});me({option:{checked:e,disabled:t},children:c,optionsTreeMap:i})})},Ht=({children:e,optionsTreeMap:t})=>e.some(s=>s.disabled)?!0:e.some(s=>{if(!s.isGroup)return!1;let i=X({id:s.id,optionsTreeMap:t});return Ht({children:i,optionsTreeMap:t})}),At=e=>e.every(t=>!!t.disabled),is=e=>e.every(t=>t.checked),ls=e=>e.some(t=>t.checked||t.isPartialChecked),ns=e=>{e.forEach(t=>{t.checked=!1,t.isPartialChecked=!1})},os=({options:e,openLevel:t,isIndependentNodes:s})=>{let i={level:0,groupId:""},n=new Map;return Ot({optionsTreeMap:n,options:e,openLevel:t,groupId:i.groupId,level:i.level}),hs({optionsTreeMap:n,isIndependentNodes:s}),n},Ot=({optionsTreeMap:e,options:t,openLevel:s,groupId:i,level:n})=>{t.forEach(c=>{var r,v;let g=(((r=c.children)==null?void 0:r.length)??0)>0,C=n>=s&&g,w=n>s,b=((v=c.children)==null?void 0:v.map(L=>L.value))??[],f=c.value;e.has(f)&&console.error(`Validation: You have duplicated option value: ${f}! You should use unique values. Duplicates will lead to unexpected behavior.`),e.set(f,{id:f,name:c.name,childOf:i,isGroup:g,checked:!1,isPartialChecked:!1,level:n,isClosed:C,hidden:w,disabled:c.disabled??!1,isGroupSelectable:!g||(c.isGroupSelectable??!0),children:b,checkboxHtmlElement:null,itemHtmlElement:null,arrowItemHtmlElement:null,checkboxIconHtmlElement:null}),g&&Ot({optionsTreeMap:e,options:c.children,openLevel:s,groupId:f,level:n+1})})},as=(e,t)=>e===null?null:t.get(e)??t.get(parseInt(e))??null,X=({id:e,optionsTreeMap:t})=>{let s=t.get(e)??null;return s===null?[]:s.children.reduce((i,n)=>{let c=t.get(n)??null;return c!==null&&i.push(c),i},[])},cs=e=>{let t=[],s=[],i=[];e.forEach(c=>{c.checked&&(i.push(c),c.isGroup?s.push(c):t.push(c))});let n=i.filter(c=>!s.some(({id:r})=>r===c.childOf));return{ungroupedNodes:t,groupedNodes:n,allNodes:i}},hs=({optionsTreeMap:e,isIndependentNodes:t})=>{let s=[];e.forEach(i=>{i.disabled&&s.push(i)}),s.forEach(({id:i})=>Le({option:{id:i,checked:!1},optionsTreeMap:e,isIndependentNodes:t}))},J=(e,{id:t,isClosed:s})=>{X({id:t,optionsTreeMap:e}).forEach(i=>{i.hidden=s??!1,i.isGroup&&!i.isClosed&&J(e,{id:i.id,isClosed:s})})},rs=(e,t)=>{if(t){ds(e);return}e.forEach(s=>{s.checked&&Se(s.childOf,e),s.isGroup&&!s.disabled&&(s.checked||s.isPartialChecked)&&(s.isClosed=!1,J(e,s))})},ds=e=>{let t=null;for(let[s,i]of e)if(i.checked&&!i.disabled){t=i;break}t&&(t.isGroup&&(t.isClosed=!1,J(e,t)),Se(t.childOf,e))},Se=(e,t)=>{let s=t.get(e)??null;s&&(s.isClosed=!1,J(t,s),Se(s.childOf,t))},us=(e,t)=>{e.forEach(s=>{let i=s.name.toLowerCase().includes(t.toLowerCase());i&&(s.isGroup&&(s.isClosed=!0),s.childOf&&It(s.childOf,e)),s.hidden=!i})},It=(e,t)=>{let s=t.get(e)??null;s&&(s.hidden=!1,s.isClosed=!1,It(s.childOf,t))},ps=({optionsTreeMap:e,beforeSearchStateMap:t})=>{e.forEach(s=>{let i=t.get(s.id);i&&(s.hidden=i.hidden,s.isClosed=i.isClosed)}),t.clear()},ms=({optionsTreeMap:e,beforeSearchStateMap:t})=>{t.clear(),e.forEach(s=>{t.set(s.id,{hidden:s.hidden,isClosed:s.isClosed})})},vs=e=>new IntersectionObserver(t=>{t.forEach(s=>{s.target.classList.toggle("treeselect-list__item--scroll-not-visible",!s.isIntersecting)})},{root:e,threshold:.5}),bs=({optionsTreeMap:e,emptyListHtmlElement:t,iconElements:s,previousSingleSelectedValue:i,rtl:n})=>{e.forEach(c=>{let r=c.checkboxHtmlElement;r&&(r.checked=c.checked),Es({option:c,previousSingleSelectedValue:i}),Cs(c),ws(c),Ls({option:c,iconElements:s}),Ss(c),gs({option:c,optionsTreeMap:e,rtl:n}),Ts({option:c,iconElements:s}),ys(c)}),fs({optionsTreeMap:e,emptyListHtmlElement:t})},gs=({option:e,optionsTreeMap:t,rtl:s})=>{let i=e.level===0,n=20,c=5,r="0";if(i){let g=!1;for(let[w,b]of t)if(b.isGroup&&b.level===e.level){g=!0;break}let C=!e.isGroup&&g?`${n}px`:`${c}px`;r=e.isGroup?"0":C}else r=e.isGroup?`${e.level*n}px`:`${e.level*n+n}px`;let v=e.itemHtmlElement;v&&(s?v.style.paddingRight=r:v.style.paddingLeft=r,v.setAttribute("level",e.level.toString()),v.setAttribute("group",e.isGroup.toString()))},fs=({optionsTreeMap:e,emptyListHtmlElement:t})=>{let s=!1;for(let[i,n]of e)if(!n.hidden){s=!0;break}t?.classList.toggle("treeselect-list__empty--hidden",s)},ks=(e,t)=>{t&&Object.keys(t).forEach(s=>{let i=t[s];typeof i=="string"&&e.setAttribute(s,i)})},Es=({option:e,previousSingleSelectedValue:t})=>{let s=e.itemHtmlElement;s?.classList.toggle("treeselect-list__item--checked",e.checked);let i=Array.isArray(t)&&t[0]===e.id&&!e.disabled;s?.classList.toggle("treeselect-list__item--single-selected",i)},Cs=e=>{let t=e.itemHtmlElement;t?.classList.toggle("treeselect-list__item--partial-checked",e.isPartialChecked)},ws=e=>{let t=e.itemHtmlElement;t?.classList.toggle("treeselect-list__item--disabled",e.disabled)},Ls=({option:e,iconElements:t})=>{let s=e.arrowItemHtmlElement;if(e.isGroup&&s){let i=e.isClosed?t.arrowRight:t.arrowDown;A(i,s);let n=e.itemHtmlElement;n?.classList.toggle("treeselect-list__item--closed",e.isClosed)}},Ss=e=>{let t=e.itemHtmlElement;t?.classList.toggle("treeselect-list__item--hidden",e.hidden)},Ts=({option:e,iconElements:t})=>{let s=e.checkboxIconHtmlElement;s&&(e.checked?A(t.check,s):e.isPartialChecked?A(t.partialCheck,s):s.innerHTML="")},ys=e=>{let t=e.itemHtmlElement;t?.classList.toggle("treeselect-list__item--non-selectable-group",!e.isGroupSelectable)},xs=({newValue:e,optionsTreeMap:t,isSingleSelect:s,expandSelected:i,isFirstValueUpdate:n,isIndependentNodes:c})=>{Mt({newValue:e,optionsTreeMap:t,isSingleSelect:s,isIndependentNodes:c}),n&&i&&rs(t,s)},D,W,R,ee,h,K,Bt,Vt,Pt,Re,$e,Fe,oe,je,Ue,qe,ae,ze,Ye,Ke,Xe,Je,Ze,Qe,et,tt,ve,st,it,ce,Z,be,lt,ge=class{constructor({options:t,value:s,openLevel:i,listSlotHtmlComponent:n,tagsSortFn:c,emptyText:r,isSingleSelect:v,iconElements:g,showCount:C,disabledBranchNode:w,expandSelected:b,isIndependentNodes:f,rtl:L,listClassName:M,isBoostedRendering:N,inputCallback:O,arrowClickCallback:V,mouseupCallback:I}){k(this,h),a(this,"options"),a(this,"value"),a(this,"openLevel"),a(this,"listSlotHtmlComponent"),a(this,"tagsSortFn"),a(this,"emptyText"),a(this,"isSingleSelect"),a(this,"showCount"),a(this,"disabledBranchNode"),a(this,"expandSelected"),a(this,"isIndependentNodes"),a(this,"rtl"),a(this,"listClassName"),a(this,"isBoostedRendering"),a(this,"iconElements"),a(this,"searchText"),a(this,"intersectionItemsObserver"),a(this,"selectedNodes"),a(this,"optionsTreeMap"),a(this,"beforeSearchStateMap"),a(this,"emptyListHtmlElement"),a(this,"srcElement"),a(this,"inputCallback"),a(this,"arrowClickCallback"),a(this,"mouseupCallback"),k(this,D,null),k(this,W,!0),k(this,R,[]),k(this,ee,!0),this.options=t,this.value=s,this.openLevel=i??0,this.listSlotHtmlComponent=n??null,this.tagsSortFn=c??null,this.emptyText=r??"No results found...",this.isSingleSelect=v??!1,this.showCount=C??!1,this.disabledBranchNode=w??!1,this.expandSelected=b??!1,this.isIndependentNodes=f??!1,this.rtl=L??!1,this.listClassName=M??"",this.isBoostedRendering=N,this.iconElements=g,this.searchText="",this.intersectionItemsObserver=null,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.optionsTreeMap=os({options:this.options,openLevel:this.openLevel,isIndependentNodes:this.isIndependentNodes}),this.beforeSearchStateMap=new Map,this.emptyListHtmlElement=null,this.srcElement=o(this,h,Pt).call(this),this.inputCallback=O,this.arrowClickCallback=V,this.mouseupCallback=I}updateValue(t){this.value=t,E(this,R,this.isSingleSelect?this.value:[]),xs({newValue:t,optionsTreeMap:this.optionsTreeMap,isSingleSelect:this.isSingleSelect,expandSelected:this.expandSelected,isFirstValueUpdate:l(this,ee),isIndependentNodes:this.isIndependentNodes}),o(this,h,K).call(this),E(this,ee,!1),o(this,h,be).call(this)}updateSearchValue(t){if(t===this.searchText)return;let s=this.searchText===""&&t!=="";this.searchText=t,s&&ms({beforeSearchStateMap:this.beforeSearchStateMap,optionsTreeMap:this.optionsTreeMap}),this.searchText===""&&ps({beforeSearchStateMap:this.beforeSearchStateMap,optionsTreeMap:this.optionsTreeMap}),this.searchText&&us(this.optionsTreeMap,t),o(this,h,K).call(this),this.focusFirstListElement()}callKeyAction(t){E(this,W,!1);let s=this.srcElement.querySelector(".treeselect-list__item--focused");if(s?.classList.contains("treeselect-list__item--hidden"))return;let i=t.key;i==="Enter"&&s&&s.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&o(this,h,Bt).call(this,s,t),(i==="ArrowDown"||i==="ArrowUp")&&o(this,h,Vt).call(this,s,i)}focusFirstListElement(){let t="treeselect-list__item--focused",s=this.srcElement.querySelector(`.${t}`),i=o(this,h,ve).call(this);if(!i.length)return;s&&s.classList.remove(t);let[n]=i;n.classList.add(t)}isLastFocusedElementExist(){return!!l(this,D)}destroy(){this.intersectionItemsObserver&&this.intersectionItemsObserver.disconnect()}};D=new WeakMap,W=new WeakMap,R=new WeakMap,ee=new WeakMap,h=new WeakSet,K=function(){bs({optionsTreeMap:this.optionsTreeMap,emptyListHtmlElement:this.emptyListHtmlElement,iconElements:this.iconElements,previousSingleSelectedValue:l(this,R),rtl:this.rtl})},Bt=function(e,t){if(!e)return;let s=t.key,i=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),n=as(i,this.optionsTreeMap),c=n.arrowItemHtmlElement;s==="ArrowLeft"&&!n.isClosed&&n.isGroup&&(c.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&n.isClosed&&n.isGroup&&(c.dispatchEvent(new Event("mousedown")),t.preventDefault())},Vt=function(e,t){var s;let i=o(this,h,ve).call(this);if(!i.length)return;let n="treeselect-list__item--focused";if(e){let c=i.findIndex(L=>L.classList.contains(n));i[c].classList.remove(n);let r=t==="ArrowDown"?c+1:c-1,v=t==="ArrowDown"?0:i.length-1,g=!i[r],C=i[r]??i[v];C.classList.add(n);let w=this.srcElement.getBoundingClientRect(),b=C.getBoundingClientRect();if(g&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(g&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}let f=((s=this.listSlotHtmlComponent)==null?void 0:s.clientHeight)??0;if(w.y+w.height<b.y+b.height+f){this.srcElement.scroll(0,this.srcElement.scrollTop+b.height);return}if(w.y>b.y){this.srcElement.scroll(0,this.srcElement.scrollTop-b.height);return}}else{let[c]=i;c.classList.add(n)}},Pt=function(){let e=o(this,h,Re).call(this),t=o(this,h,oe).call(this,this.options);e.append(...t);let s=o(this,h,Ue).call(this);e.append(s);let i=o(this,h,je).call(this);return i&&e.append(i),e},Re=function(){let e=document.createElement("div");return e.classList.add("treeselect-list"),this.listClassName.length>0&&e.classList.add(this.listClassName),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>o(this,h,$e).call(this,t)),e.addEventListener("mousemove",()=>o(this,h,Fe).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),this.isBoostedRendering&&(this.intersectionItemsObserver=vs(e)),e},$e=function(e){e.stopPropagation(),l(this,D)&&l(this,W)&&l(this,D).classList.add("treeselect-list__item--focused")},Fe=function(){E(this,W,!0)},oe=function(e){return e.reduce((t,s)=>{var i;if((i=s.children)!=null&&i.length){let c=o(this,h,qe).call(this,s),r=o(this,h,oe).call(this,s.children);return c.append(...r),t.push(c),t}let n=o(this,h,ae).call(this,s,!1);return t.push(n),t},[])},je=function(){if(!this.listSlotHtmlComponent)return null;let e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},Ue=function(){let e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);let t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),A(this.iconElements.attention,t);let s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),this.emptyListHtmlElement=e,e},qe=function(e){let t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");let s=o(this,h,ae).call(this,e,!0);return t.appendChild(s),t},ae=function(e,t){let s=o(this,h,ze).call(this,e);if(t){let c=o(this,h,Je).call(this,e);s.appendChild(c),s.classList.add("treeselect-list__item--group")}let i=o(this,h,Qe).call(this,e),n=o(this,h,et).call(this,e,t);return s.append(i,n),s},ze=function(e){let t=document.createElement("div");t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),ks(t,e.htmlAttr),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>o(this,h,Ye).call(this,t),!0),t.addEventListener("mouseout",()=>o(this,h,Ke).call(this,t),!0),t.addEventListener("mousedown",i=>o(this,h,Xe).call(this,i,e)),this.intersectionItemsObserver&&this.intersectionItemsObserver.observe(t);let s=this.optionsTreeMap.get(e.value);return s&&(s.itemHtmlElement=t),t},Ye=function(e){l(this,W)&&o(this,h,ce).call(this,!0,e)},Ke=function(e){l(this,W)&&(o(this,h,ce).call(this,!1,e),E(this,D,e))},Xe=function(e,t){e.preventDefault(),e.stopPropagation();let s=this.optionsTreeMap.get(t.value)??null;if(s!=null&&s.disabled)return;let i=s?.checkboxHtmlElement;i&&(i.checked=!i.checked,o(this,h,st).call(this,i,t))},Je=function(e){let t=document.createElement("span");t.setAttribute("tabindex","-1"),t.classList.add("treeselect-list__item-icon"),A(this.iconElements.arrowDown,t),t.addEventListener("mousedown",i=>o(this,h,Ze).call(this,i,e));let s=this.optionsTreeMap.get(e.value);return s&&(s.arrowItemHtmlElement=t),t},Ze=function(e,t){e.preventDefault(),e.stopPropagation(),o(this,h,it).call(this,t)},Qe=function(e){let t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");let s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";let i=document.createElement("input");i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i);let n=this.optionsTreeMap.get(e.value);return n&&(n.checkboxHtmlElement=i,n.checkboxIconHtmlElement=s),t},et=function(e,t){let s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){let i=o(this,h,tt).call(this,e);s.appendChild(i)}return s},tt=function(e){var t;let s=document.createElement("span"),i=((t=this.optionsTreeMap.get(e.value))==null?void 0:t.children)??[];return s.textContent=`(${i.length})`,s.classList.add("treeselect-list__item-label-counter"),s},ve=function(){let e=[];return this.optionsTreeMap.forEach(t=>{!t.hidden&&t.itemHtmlElement&&e.push(t.itemHtmlElement)}),e},st=function(e,t){let s=this.optionsTreeMap.get(t.value)??null;if(s===null)return;let i=s.isGroupSelectable??!0;if(s.isGroup&&(this.disabledBranchNode||!i)){let n=s.arrowItemHtmlElement;n?.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){let[n]=l(this,R);if(s.id===n)return;E(this,R,[s.id]),Mt({newValue:[s.id],optionsTreeMap:this.optionsTreeMap,isSingleSelect:this.isSingleSelect,isIndependentNodes:this.isIndependentNodes})}else{s.checked=e.checked;let n=Le({option:s,optionsTreeMap:this.optionsTreeMap,isIndependentNodes:this.isIndependentNodes});e.checked=n}o(this,h,K).call(this),o(this,h,lt).call(this)},it=function(e){let t=this.optionsTreeMap.get(e.value)??null;t!==null&&(t.isClosed=!t.isClosed,J(this.optionsTreeMap,t),o(this,h,K).call(this),this.arrowClickCallback(t.id,t.isClosed))},ce=function(e,t){let s="treeselect-list__item--focused";if(e){let i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(n=>n.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},Z=function(e){return this.tagsSortFn===null?e:[...e].sort((t,s)=>this.tagsSortFn({value:t.id,name:t.name},{value:s.id,name:s.name}))},be=function(){let{ungroupedNodes:e,groupedNodes:t,allNodes:s}=cs(this.optionsTreeMap);this.selectedNodes={nodes:o(this,h,Z).call(this,e),groupedNodes:o(this,h,Z).call(this,t),allNodes:o(this,h,Z).call(this,s)}},lt=function(){o(this,h,be).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};var nt=({parentHtmlContainer:e,staticList:t,appendToBody:s,isSingleSelect:i,value:n,direction:c})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(n)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!i&&!Array.isArray(n)&&console.error("Validation: you should pass an array as a value!"),c&&c!=="auto"&&c!=="bottom"&&c!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},Q=e=>e.map(t=>t.id),Ms=e=>e==null?[]:Array.isArray(e)?e:[e],Ns=(e,t)=>{if(t){let[s]=e;return s??null}return e},p,m,U,te,q,_,H,T,P,d,fe,he,ot,at,ct,ht,rt,dt,ke,ut,pt,mt,vt,Ee,Ce,ie,re,se,bt,de,gt,ft,kt,Et,Ct,le=class{constructor({parentHtmlContainer:t,value:s,options:i,openLevel:n,appendToBody:c,alwaysOpen:r,showTags:v,tagsCountText:g,tagsSortFn:C,clearable:w,searchable:b,placeholder:f,grouped:L,isGroupedValue:M,listSlotHtmlComponent:N,disabled:O,emptyText:V,staticList:I,id:F,ariaLabel:j,isSingleSelect:S,showCount:ne,disabledBranchNode:Gt,direction:Wt,expandSelected:Dt,saveScrollPosition:Rt,isIndependentNodes:$t,rtl:Ft,listClassName:jt,isBoostedRendering:Ut,iconElements:qt,inputCallback:zt,openCallback:Yt,closeCallback:Kt,nameChangeCallback:Xt,searchCallback:Jt,openCloseGroupCallback:Zt}){k(this,d),a(this,"parentHtmlContainer"),a(this,"value"),a(this,"options"),a(this,"openLevel"),a(this,"appendToBody"),a(this,"alwaysOpen"),a(this,"showTags"),a(this,"tagsCountText"),a(this,"tagsSortFn"),a(this,"clearable"),a(this,"searchable"),a(this,"placeholder"),a(this,"grouped"),a(this,"isGroupedValue"),a(this,"listSlotHtmlComponent"),a(this,"disabled"),a(this,"emptyText"),a(this,"staticList"),a(this,"id"),a(this,"ariaLabel"),a(this,"isSingleSelect"),a(this,"showCount"),a(this,"disabledBranchNode"),a(this,"direction"),a(this,"expandSelected"),a(this,"saveScrollPosition"),a(this,"isIndependentNodes"),a(this,"rtl"),a(this,"listClassName"),a(this,"isBoostedRendering"),a(this,"iconElements"),a(this,"inputCallback"),a(this,"openCallback"),a(this,"closeCallback"),a(this,"nameChangeCallback"),a(this,"searchCallback"),a(this,"openCloseGroupCallback"),a(this,"ungroupedValue"),a(this,"groupedValue"),a(this,"allValue"),a(this,"isListOpened"),a(this,"selectedName"),a(this,"srcElement"),k(this,p,null),k(this,m,null),k(this,U,null),k(this,te,0),k(this,q,0),k(this,_,null),k(this,H,null),k(this,T,null),k(this,P,null),nt({parentHtmlContainer:t,value:s,staticList:I,appendToBody:c,isSingleSelect:S}),this.parentHtmlContainer=t,this.value=[],this.options=i??[],this.openLevel=n??0,this.appendToBody=c??!1,this.alwaysOpen=!!(r&&!O),this.showTags=v??!0,this.tagsCountText=g??"elements selected",this.tagsSortFn=C??null,this.clearable=w??!0,this.searchable=b??!0,this.placeholder=f??"Search...",this.grouped=L??!0,this.isGroupedValue=M??!1,this.listSlotHtmlComponent=N??null,this.disabled=O??!1,this.emptyText=V??"No results found...",this.staticList=!!(I&&!this.appendToBody),this.id=F??"",this.ariaLabel=j??"",this.isSingleSelect=S??!1,this.showCount=ne??!1,this.disabledBranchNode=Gt??!1,this.direction=Wt??"auto",this.expandSelected=Dt??!1,this.saveScrollPosition=Rt??!0,this.isIndependentNodes=$t??!1,this.rtl=Ft??!1,this.listClassName=jt??"",this.isBoostedRendering=Ut??!1,this.iconElements=ye(qt),this.inputCallback=zt,this.openCallback=Yt,this.closeCallback=Kt,this.nameChangeCallback=Xt,this.searchCallback=Jt,this.openCloseGroupCallback=Zt,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,o(this,d,fe).call(this,s)}mount(){nt({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=ye(this.iconElements),o(this,d,fe).call(this,this.value)}updateValue(t){let s=Ms(t),i=l(this,p);i&&(i.updateValue(s),o(this,d,ke).call(this,i?.selectedNodes))}destroy(){var t;this.srcElement&&(o(this,d,Ee).call(this),this.srcElement.innerHTML="",this.srcElement=null,o(this,d,se).call(this,!0),(t=l(this,p))==null||t.destroy())}focus(){l(this,m)&&l(this,m).focus()}toggleOpenClose(){l(this,m)&&(l(this,m).openClose(),l(this,m).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var s,i,n;(s=this.srcElement)!=null&&s.contains(t.target)||(i=l(this,p))!=null&&i.srcElement.contains(t.target)||((n=l(this,m))==null||n.blur(),o(this,d,se).call(this,!1),o(this,d,ie).call(this,!1))}blurWindowHandler(){var t;(t=l(this,m))==null||t.blur(),o(this,d,se).call(this,!1),o(this,d,ie).call(this,!1)}updateListPosition(){var t;let s=this.srcElement,i=(t=l(this,p))==null?void 0:t.srcElement;if(!s||!i)return;if(this.staticList){i.setAttribute("direction","bottom"),o(this,d,Ce).call(this,!1,this.appendToBody);return}let{height:n}=i.getBoundingClientRect(),{x:c,y:r,height:v,width:g}=s.getBoundingClientRect(),C=window.innerHeight,w=r,b=C-r-v,f=w>b&&w>=n&&b<n;if(this.direction!=="auto"&&(f=this.direction==="top"),this.appendToBody){(i.style.top!=="0px"||i.style.left!=="0px")&&(i.style.top="0px",i.style.left="0px");let M=c+window.scrollX,N=f?r+window.scrollY-n:r+window.scrollY+v;i.style.transform=`translate(${M}px,${N}px)`,i.style.width=`${g}px`}let L=f?"top":"bottom";i.getAttribute("direction")!==L&&(i.setAttribute("direction",L),o(this,d,Ce).call(this,f,this.appendToBody))}};p=new WeakMap,m=new WeakMap,U=new WeakMap,te=new WeakMap,q=new WeakMap,_=new WeakMap,H=new WeakMap,T=new WeakMap,P=new WeakMap,d=new WeakSet,fe=function(e){var t;this.destroy();let{container:s,list:i,input:n}=o(this,d,ot).call(this);this.srcElement=s,E(this,p,i),E(this,m,n),E(this,_,this.scrollWindowHandler.bind(this)),E(this,H,this.scrollWindowHandler.bind(this)),E(this,T,this.focusWindowHandler.bind(this)),E(this,P,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((t=l(this,m))==null||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},he=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?Q(t):[],this.groupedValue=e?Q(e):[],this.allValue=s?Q(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=Ns(i,this.isSingleSelect)},ot=function(){let e=this.parentHtmlContainer;e.classList.add("treeselect");let t=new ge({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,tagsSortFn:this.tagsSortFn,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,rtl:this.rtl,listClassName:this.listClassName,isBoostedRendering:this.isBoostedRendering,iconElements:this.iconElements,inputCallback:i=>o(this,d,ut).call(this,i),arrowClickCallback:(i,n)=>o(this,d,pt).call(this,i,n),mouseupCallback:()=>{var i;return(i=l(this,m))==null?void 0:i.focus()}}),s=new pe({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>o(this,d,at).call(this,i),searchCallback:i=>o(this,d,ht).call(this,i),openCallback:()=>o(this,d,vt).call(this),closeCallback:()=>o(this,d,Ee).call(this),keydownCallback:i=>o(this,d,ct).call(this,i),focusCallback:()=>o(this,d,rt).call(this),blurCallback:()=>o(this,d,dt).call(this),nameChangeCallback:i=>o(this,d,mt).call(this,i)});return this.rtl&&(e.setAttribute("dir","rtl"),t.srcElement.setAttribute("dir","rtl")),this.appendToBody&&E(this,U,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},at=function(e){var t,s;let i=Q(e);(t=l(this,p))==null||t.updateValue(i);let n=((s=l(this,p))==null?void 0:s.selectedNodes)??{};o(this,d,he).call(this,n),o(this,d,de).call(this)},ct=function(e){var t;this.isListOpened&&((t=l(this,p))==null||t.callKeyAction(e))},ht=function(e){l(this,q)&&clearTimeout(l(this,q)),E(this,q,window.setTimeout(()=>{var t;(t=l(this,p))==null||t.updateSearchValue(e),this.updateListPosition()},350)),o(this,d,Et).call(this,e)},rt=function(){o(this,d,ie).call(this,!0),l(this,T)&&l(this,T)&&l(this,P)&&(document.addEventListener("mousedown",l(this,T),!0),document.addEventListener("focus",l(this,T),!0),window.addEventListener("blur",l(this,P)))},dt=function(){setTimeout(()=>{var e,t;let s=(e=l(this,m))==null?void 0:e.srcElement.contains(document.activeElement),i=(t=l(this,p))==null?void 0:t.srcElement.contains(document.activeElement);!s&&!i&&this.blurWindowHandler()},1)},ke=function(e){var t;if(!e)return;let s=[];this.isIndependentNodes||this.isSingleSelect?s=e.allNodes:this.grouped?s=e.groupedNodes:s=e.nodes,(t=l(this,m))==null||t.updateValue(s),o(this,d,he).call(this,e)},ut=function(e){var t,s,i;o(this,d,ke).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=l(this,m))==null||t.openClose(),(s=l(this,m))==null||s.clearSearch()),(i=l(this,m))==null||i.focus(),o(this,d,de).call(this)},pt=function(e,t){var s;(s=l(this,m))==null||s.focus(),this.updateListPosition(),o(this,d,Ct).call(this,e,t)},mt=function(e){this.selectedName!==e&&(this.selectedName=e,o(this,d,gt).call(this))},vt=function(){var e;this.isListOpened=!0,l(this,_)&&l(this,H)&&(window.addEventListener("scroll",l(this,_),!0),window.addEventListener("resize",l(this,H))),!(!l(this,p)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(l(this,p).srcElement),(e=l(this,U))==null||e.observe(this.srcElement)):this.srcElement.appendChild(l(this,p).srcElement),this.updateListPosition(),o(this,d,re).call(this,!0),o(this,d,bt).call(this),o(this,d,ft).call(this))},Ee=function(){var e;this.alwaysOpen||(this.isListOpened=!1,l(this,_)&&l(this,H)&&(window.removeEventListener("scroll",l(this,_),!0),window.removeEventListener("resize",l(this,H))),!l(this,p)||!this.srcElement)||!(this.appendToBody?document.body.contains(l(this,p).srcElement):this.srcElement.contains(l(this,p).srcElement))||(E(this,te,l(this,p).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(l(this,p).srcElement),(e=l(this,U))==null||e.disconnect()):this.srcElement.removeChild(l(this,p).srcElement),o(this,d,re).call(this,!1),o(this,d,kt).call(this))},Ce=function(e,t){if(!l(this,p)||!l(this,m))return;let s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(l(this,p).srcElement.classList.add(s),l(this,p).srcElement.classList.remove(i),l(this,m).srcElement.classList.add("treeselect-input--top"),l(this,m).srcElement.classList.remove("treeselect-input--bottom")):(l(this,p).srcElement.classList.remove(s),l(this,p).srcElement.classList.add(i),l(this,m).srcElement.classList.remove("treeselect-input--top"),l(this,m).srcElement.classList.add("treeselect-input--bottom"))},ie=function(e){!l(this,m)||!l(this,p)||(e?(l(this,m).srcElement.classList.add("treeselect-input--focused"),l(this,p).srcElement.classList.add("treeselect-list--focused")):(l(this,m).srcElement.classList.remove("treeselect-input--focused"),l(this,p).srcElement.classList.remove("treeselect-list--focused")))},re=function(e){var t,s,i,n;e?(t=l(this,m))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=l(this,m))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=l(this,p))==null||i.srcElement.classList.add("treeselect-list--static"):(n=l(this,p))==null||n.srcElement.classList.remove("treeselect-list--static")},se=function(e){!l(this,_)||!l(this,H)||!l(this,T)||!l(this,P)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",l(this,_),!0),window.removeEventListener("resize",l(this,H))),document.removeEventListener("mousedown",l(this,T),!0),document.removeEventListener("focus",l(this,T),!0),window.removeEventListener("blur",l(this,P)))},bt=function(){var e,t,s;let i=(e=l(this,p))==null?void 0:e.isLastFocusedElementExist();this.saveScrollPosition&&i?(t=l(this,p))==null||t.srcElement.scroll(0,l(this,te)):(s=l(this,p))==null||s.focusFirstListElement()},de=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},gt=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},ft=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},kt=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},Et=function(e){var t;let s=e?.trim()??"";(t=this.srcElement)==null||t.dispatchEvent(new CustomEvent("search",{detail:s})),this.searchCallback&&this.searchCallback(s)},Ct=function(e,t){var s;(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)};function _s({state:e,name:t,options:s,searchable:i,showCount:n,placeholder:c,rtl:r,disabledBranchNode:v=!0,disabled:g=!1,isSingleSelect:C=!0,showTags:w=!0,clearable:b=!0,isIndependentNodes:f=!0,alwaysOpen:L=!1,staticList:M=!1,emptyText:N,expandSelected:O=!0,grouped:V=!0,isGroupedValue:I=!1,openLevel:F=0,direction:j="auto"}){return{state:e,tree:null,formatState:function(S){return C&&Array.isArray(S)&&(S=S[0]),!C&&!Array.isArray(S)&&(S=[S]),Array.isArray(S)?(S??[]).map(ne=>ne?.toString()):S?.toString()},init(){this.tree=new le({id:`tree-${t}-id`,ariaLabel:`tree-${t}-label`,parentHtmlContainer:this.$refs.tree,value:this.formatState(this.state),options:s,searchable:i,showCount:n,placeholder:c,disabledBranchNode:v,disabled:g,isSingleSelect:C,showTags:w,clearable:b,isIndependentNodes:f,alwaysOpen:L,staticList:M,emptyText:N,expandSelected:O,grouped:V,isGroupedValue:I,openLevel:F,direction:j,rtl:r}),this.tree.srcElement.addEventListener("input",S=>{this.state=S.detail})}}}export{_s as default};
